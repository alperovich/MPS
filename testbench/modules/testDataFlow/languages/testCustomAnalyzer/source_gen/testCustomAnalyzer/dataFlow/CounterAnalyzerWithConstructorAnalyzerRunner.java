package testCustomAnalyzer.dataFlow;

/*Generated by MPS */

import jetbrains.mps.analyzers.runtime.framework.CustomAnalyzerRunner;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.dataFlow.framework.AnalyzerRules;
import jetbrains.mps.lang.dataFlow.framework.Program;
import jetbrains.mps.lang.dataFlow.MPSProgramBuilder;
import jetbrains.mps.lang.dataFlow.framework.DataFlowAnalyzer;
import java.util.List;
import jetbrains.mps.lang.dataFlow.framework.ProgramState;
import jetbrains.mps.lang.dataFlow.framework.AnalysisDirection;

public class CounterAnalyzerWithConstructorAnalyzerRunner extends CustomAnalyzerRunner<Integer> {
  private SNode myNode;
  public CounterAnalyzerWithConstructorAnalyzerRunner(SNode node, int initialCounter) {
    super(null, null);
    myNode = node;
    myAnalyzer = new CounterAnalyzerWithConstructorAnalyzerRunner.CounterAnalyzerWithConstructorAnalyzer(initialCounter);
    myProgram = createProgram();
    prepareProgram();
  }
  private void prepareProgram() {
    new AnalyzerRules("testCustomAnalyzer.dataFlow.CounterAnalyzerWithConstructor", myNode, myProgram).apply();
  }
  private Program createProgram() {
    return new MPSProgramBuilder().buildProgram(myNode);
  }
  public static class CounterAnalyzerWithConstructorAnalyzer implements DataFlowAnalyzer<Integer> {
    private int initialCounter;
    public CounterAnalyzerWithConstructorAnalyzer(int initialCounter) {
      this.initialCounter = initialCounter;
    }
    public Integer initial(Program program) {
      return this.initialCounter;
    }
    public Integer merge(Program program, List<Integer> input) {
      int maxCounter = this.initialCounter;
      for (Integer counter : input) {
        if (counter > maxCounter) {
          maxCounter = counter;
        }
      }
      return maxCounter;
    }
    public Integer fun(Integer input, ProgramState state) {
      return input + 1;
    }
    public AnalysisDirection getDirection() {
      return AnalysisDirection.FORWARD;
    }
    /**
     * 
     * @deprecated 
     */
    @Deprecated
    public static String getId() {
      return "testCustomAnalyzer.dataFlow.CounterAnalyzerWithConstructor";
    }
  }
}
